.col-lg-5.m-auto
  = link_to("â†µ Back", :back)

  %h2.mt-3 Edit #{resource_name.to_s.humanize}

  = turbo_frame_tag(resource) do
    = simple_form_for(resource,
                      builder: ValidatedFormBuilder,
                      as: resource_name,
                      url: registration_path(resource_name),
                      is_form_submitted: resource.errors.present?,
                      html: { method: :put }) do |f|
      .form-inputs
        = f.validated_input(:email,
                            get_formatted_errors(resource.errors.to_hash(true), :email),
                            required: true,
                            autofocus: true)

        = f.validated_input(:username,
                            get_formatted_errors(resource.errors.to_hash(true), :username),
                            required: true,
                            autofocus: true)

        - if devise_mapping.confirmable? && resource.pending_reconfirmation?
          %p Currently waiting confirmation for: #{resource.unconfirmed_email}

        = f.validated_input(:password,
                            get_formatted_errors(resource.errors.to_hash(true), :password),
                            label: "New Password",
                            hint: "Leave it blank if you don't want to change it",
                            required: false,
                            autocomplete: "new-password")

        = f.validated_input(:password_confirmation,
                            get_formatted_errors(resource.errors.to_hash(true), :password_confirmation),
                            label: "New Password Confirmation",
                            required: false,
                            autocomplete: "new-password")

        = f.validated_input(:current_password,
                            get_formatted_errors(resource.errors.to_hash(true), :current_password),
                            hint: "We need your current password to confirm your changes",
                            required: true,
                            input_html: { autocomplete: "current-password" })

      .form-actions.mt-4.d-flex.justify-content-end.gap-2
        = f.button(:submit, "Apply Changes", class: "btn-primary px-4")

      %div{ data: { "turbo-toast": true, "notifications": flash[:notifications].to_json } }
      - flash.discard(:notifications)

  .d-flex.align-items-center.justify-content-end
    %p= "Not satisfied?"
    = button_to("Delete your account",
                registration_path(resource_name),
                data: { confirm: "Are you sure? This action is unrecoverable and cannot be undone." },
                class: "btn btn-text text-danger text-decoration-underline",
                method: :delete)
