= simple_form_for(user,
                  url: registration_avatar_path(user),
                  method: :patch,
                  html: { id: "avatar-form", multipart: true, "data-turbo": "true" }) do |f|
  .form-group
    = image_tag(user.avatar_or_default,
                id: "avatar-preview",
                height: 100,
                width: 100,
                class: "rounded")
    .my-2
      // Original file input is hidden, so a custom button can be styled
      = f.file_field(:avatar, id: "avatar-input", class: "d-none")
      %button#avatar-custom.btn.btn-secondary{ type: "button" }
        Attach Avatar
      %span#avatar-file-name No file selected
    = f.submit("Save", class: "btn btn-primary mt-1")

  - if user.avatar.attached? && user.avatar.persisted?
    = button_to("Remove Avatar Photo",
                registration_avatar_path(user),
                method: :delete,
                form: { data: { turbo: "true", turbo_confirm: "Are you sure you want to remove your avatar photo?" } },
                class: "btn btn-danger")
